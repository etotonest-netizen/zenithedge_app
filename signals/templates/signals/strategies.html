{% load static %}
<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strategy Performance - ZenithEdge</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background: rgba(13, 17, 35, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
        }
        
        .card {
            background: rgba(26, 31, 58, 0.8);
            border: 1px solid rgba(99, 102, 241, 0.3);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 40px rgba(99, 102, 241, 0.3);
        }
        
        .stat-card {
            border-left: 4px solid;
        }
        
        .stat-card.stat-primary { border-left-color: #6366f1; }
        .stat-card.stat-success { border-left-color: #10b981; }
        .stat-card.stat-warning { border-left-color: #f59e0b; }
        .stat-card.stat-info { border-left-color: #3b82f6; }
        
        .table {
            color: #e2e8f0;
        }
        
        .table thead {
            background: rgba(99, 102, 241, 0.1);
            border-bottom: 2px solid #6366f1;
        }
        
        .table tbody tr {
            border-bottom: 1px solid rgba(99, 102, 241, 0.1);
            transition: all 0.3s ease;
        }
        
        .table tbody tr:hover {
            background: rgba(99, 102, 241, 0.1);
            transform: scale(1.01);
        }
        
        .badge-top-performer {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #000;
            font-weight: bold;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .progress {
            height: 8px;
            background: rgba(99, 102, 241, 0.2);
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
        }
        
        .chart-container {
            position: relative;
            height: 400px;
            margin-bottom: 2rem;
        }
        
        .filter-section {
            background: rgba(26, 31, 58, 0.6);
            border: 1px solid rgba(99, 102, 241, 0.2);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .metric-positive {
            color: #10b981;
            font-weight: bold;
        }
        
        .metric-negative {
            color: #ef4444;
            font-weight: bold;
        }
        
        .performance-score {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-weight: bold;
            font-size: 0.85rem;
        }
        
        .score-excellent {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .score-good {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        
        .score-fair {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .score-poor {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'signals:dashboard' %}">
                <i class="bi bi-graph-up-arrow"></i> ZenithEdge
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'signals:dashboard' %}">
                            <i class="bi bi-speedometer2"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="{% url 'signals:strategies' %}">
                            <i class="bi bi-trophy"></i> Strategies
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'signals:journal_list' %}">
                            <i class="bi bi-journal-text"></i> Journal
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% if user.is_staff %}{% url 'support:admin_inbox' %}{% else %}{% url 'support:list' %}{% endif %}">
                            <i class="bi bi-chat-dots"></i> Support
                            <span class="badge bg-danger" id="support-badge" style="display:none;"></span>
                        </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-person-circle"></i> {{ user.email|truncatechars:20 }}
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="{% url 'accounts:profile' %}"><i class="bi bi-person"></i> Profile</a></li>
                            {% if user.is_staff %}
                            <li><a class="dropdown-item" href="/admin/"><i class="bi bi-gear"></i> Admin Panel</a></li>
                            {% endif %}
                            {% if user.is_superuser %}
                            <li><hr class="dropdown-divider"></li>
                            <li><span class="dropdown-item-text text-warning"><i class="bi bi-shield-fill-check"></i> Superuser</span></li>
                            {% endif %}
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="{% url 'accounts:logout' %}"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container-fluid mt-4">
        <!-- Header with Top Performer -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h1 class="text-white mb-0">
                            <i class="bi bi-trophy"></i> Strategy Performance Analytics
                        </h1>
                        <p class="text-secondary mb-0">Comprehensive strategy performance metrics and analysis</p>
                    </div>
                    {% if top_performer %}
                    <div class="text-end">
                        <span class="badge-top-performer">
                            <i class="bi bi-star-fill"></i> Top Performer (30 Days)
                        </span>
                        <div class="mt-2 text-white">
                            <strong>{{ top_performer.strategy_name }}</strong>
                            {% if top_performer.regime %}
                                <span class="text-info">{{ top_performer.regime }}</span>
                            {% endif %}
                            <br>
                            <small>WR: {{ top_performer.win_rate|floatformat:1 }}% | RR: {{ top_performer.avg_rr|floatformat:2 }}</small>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Statistics Cards -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card stat-card stat-primary">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-secondary mb-1">Total Strategies</h6>
                                <h2 class="mb-0">{{ total_strategies }}</h2>
                            </div>
                            <i class="bi bi-bar-chart-fill text-primary" style="font-size: 3rem; opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card stat-success">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-secondary mb-1">Profitable</h6>
                                <h2 class="mb-0">{{ profitable_strategies }}</h2>
                                <small class="text-success">
                                    {% widthratio profitable_strategies total_strategies 100 %}% Success
                                </small>
                            </div>
                            <i class="bi bi-graph-up text-success" style="font-size: 3rem; opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card stat-info">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-secondary mb-1">Total Trades</h6>
                                <h2 class="mb-0">{{ total_trades_analyzed }}</h2>
                            </div>
                            <i class="bi bi-activity text-info" style="font-size: 3rem; opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card stat-warning">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-secondary mb-1">Avg Win Rate</h6>
                                <h2 class="mb-0">{{ avg_win_rate|floatformat:1 }}%</h2>
                            </div>
                            <i class="bi bi-percent text-warning" style="font-size: 3rem; opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Section -->
        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-bar-chart-line"></i> Win Rate Comparison</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="winRateChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-bullseye"></i> Risk-Reward Ratios</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="rrChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-cash-stack"></i> Profit Factor Analysis</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="profitFactorChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="bi bi-pie-chart"></i> Trade Volume Distribution</h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="tradesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Filters -->
        <div class="filter-section">
            <h5 class="mb-3"><i class="bi bi-funnel"></i> Filters</h5>
            <form method="get" action="{% url 'signals:strategies' %}">
                <div class="row g-3">
                    <div class="col-md-2">
                        <label class="form-label">Strategy Name</label>
                        <input type="text" class="form-control" name="strategy" value="{{ current_strategy }}" placeholder="e.g., ZenithEdge">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Regime</label>
                        <select class="form-select" name="regime">
                            <option value="all" {% if current_regime == 'all' %}selected{% endif %}>All Regimes</option>
                            {% for regime in available_regimes %}
                                <option value="{{ regime }}" {% if current_regime == regime %}selected{% endif %}>{{ regime }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Symbol</label>
                        <select class="form-select" name="symbol">
                            <option value="all" {% if current_symbol == 'all' %}selected{% endif %}>All Symbols</option>
                            {% for symbol in available_symbols %}
                                <option value="{{ symbol }}" {% if current_symbol == symbol %}selected{% endif %}>{{ symbol }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Timeframe</label>
                        <select class="form-select" name="timeframe">
                            <option value="all" {% if current_timeframe == 'all' %}selected{% endif %}>All Timeframes</option>
                            {% for tf in available_timeframes %}
                                <option value="{{ tf }}" {% if current_timeframe == tf %}selected{% endif %}>{{ tf }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Profitability</label>
                        <select class="form-select" name="profitable">
                            <option value="all" {% if current_profitable == 'all' %}selected{% endif %}>All</option>
                            <option value="yes" {% if current_profitable == 'yes' %}selected{% endif %}>Profitable Only</option>
                            <option value="no" {% if current_profitable == 'no' %}selected{% endif %}>Unprofitable Only</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Min Trades</label>
                        <input type="number" class="form-control" name="min_trades" value="{{ current_min_trades }}" min="1">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Sort By</label>
                        <select class="form-select" name="sort">
                            <option value="-win_rate" {% if current_sort == '-win_rate' %}selected{% endif %}>Win Rate (High to Low)</option>
                            <option value="win_rate" {% if current_sort == 'win_rate' %}selected{% endif %}>Win Rate (Low to High)</option>
                            <option value="-avg_rr" {% if current_sort == '-avg_rr' %}selected{% endif %}>Avg RR (High to Low)</option>
                            <option value="-profit_factor" {% if current_sort == '-profit_factor' %}selected{% endif %}>Profit Factor (High to Low)</option>
                            <option value="-total_pnl" {% if current_sort == '-total_pnl' %}selected{% endif %}>Total PnL (High to Low)</option>
                            <option value="-total_trades" {% if current_sort == '-total_trades' %}selected{% endif %}>Total Trades (High to Low)</option>
                        </select>
                    </div>
                    <div class="col-md-6 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary me-2">
                            <i class="bi bi-search"></i> Apply Filters
                        </button>
                        <a href="{% url 'signals:strategies' %}" class="btn btn-outline-secondary">
                            <i class="bi bi-x-circle"></i> Clear
                        </a>
                    </div>
                </div>
            </form>
        </div>

        <!-- Performance Table -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0"><i class="bi bi-table"></i> Strategy Performance Details</h5>
                <span class="badge bg-primary">{{ page_obj.paginator.count }} Results</span>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover mb-0">
                        <thead>
                            <tr>
                                <th>Strategy</th>
                                <th>Regime</th>
                                <th>Symbol</th>
                                <th>TF</th>
                                <th>Trades</th>
                                <th>Win Rate</th>
                                <th>Avg RR</th>
                                <th>Profit Factor</th>
                                <th>Max DD</th>
                                <th>Total PnL</th>
                                <th>Score</th>
                                <th>Updated</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for perf in performances %}
                            <tr>
                                <td>
                                    <strong>{{ perf.strategy_name }}</strong>
                                    {% if perf == top_performer %}
                                        <span class="badge bg-warning text-dark ms-2">
                                            <i class="bi bi-star-fill"></i> Top
                                        </span>
                                    {% endif %}
                                </td>
                                <td>
                                    {% if perf.regime %}
                                        <span class="badge bg-info">{{ perf.regime }}</span>
                                    {% else %}
                                        <span class="text-muted">All</span>
                                    {% endif %}
                                </td>
                                <td>{{ perf.symbol|default:"All" }}</td>
                                <td>{{ perf.timeframe|default:"All" }}</td>
                                <td><strong>{{ perf.total_trades }}</strong></td>
                                <td>
                                    <div class="d-flex align-items-center">
                                        <span class="{% if perf.win_rate >= 60 %}metric-positive{% elif perf.win_rate >= 40 %}text-warning{% else %}metric-negative{% endif %}">
                                            {{ perf.win_rate|floatformat:1 }}%
                                        </span>
                                        <div class="progress ms-2" style="width: 60px;">
                                            <div class="progress-bar" role="progressbar" style="width: {{ perf.win_rate }}%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td class="{% if perf.avg_rr >= 1.5 %}metric-positive{% elif perf.avg_rr >= 1 %}text-warning{% else %}metric-negative{% endif %}">
                                    {{ perf.avg_rr|floatformat:2 }}
                                </td>
                                <td class="{% if perf.profit_factor >= 2 %}metric-positive{% elif perf.profit_factor >= 1 %}text-warning{% else %}metric-negative{% endif %}">
                                    {{ perf.profit_factor|floatformat:2 }}
                                </td>
                                <td class="{% if perf.max_drawdown <= 10 %}metric-positive{% elif perf.max_drawdown <= 20 %}text-warning{% else %}metric-negative{% endif %}">
                                    {{ perf.max_drawdown|floatformat:1 }}%
                                </td>
                                <td class="{% if perf.is_profitable %}metric-positive{% else %}metric-negative{% endif %}">
                                    ${{ perf.total_pnl|floatformat:2 }}
                                </td>
                                <td>
                                    {% with score=perf.performance_score %}
                                        <span class="performance-score 
                                            {% if score >= 70 %}score-excellent
                                            {% elif score >= 50 %}score-good
                                            {% elif score >= 30 %}score-fair
                                            {% else %}score-poor
                                            {% endif %}">
                                            {{ score|floatformat:0 }}
                                        </span>
                                    {% endwith %}
                                </td>
                                <td class="text-secondary">
                                    <small>{{ perf.last_updated|date:"M d, Y" }}</small>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="12" class="text-center py-5">
                                    <i class="bi bi-inbox" style="font-size: 3rem; opacity: 0.3;"></i>
                                    <p class="text-secondary mt-3">No performance data available. Run the analyze_performance command to generate analytics.</p>
                                    <code>python manage.py analyze_performance --simulate</code>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Pagination -->
        {% if is_paginated %}
        <div class="d-flex justify-content-center mb-4">
            <nav>
                <ul class="pagination">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page=1{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">First</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Previous</a>
                        </li>
                    {% endif %}

                    <li class="page-item active">
                        <span class="page-link">{{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>
                    </li>

                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Next</a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}{% for key, value in request.GET.items %}{% if key != 'page' %}&{{ key }}={{ value }}{% endif %}{% endfor %}">Last</a>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        </div>
        {% endif %}
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Chart.js Configuration
        const chartColors = {
            primary: 'rgba(99, 102, 241, 0.8)',
            success: 'rgba(16, 185, 129, 0.8)',
            warning: 'rgba(245, 158, 11, 0.8)',
            danger: 'rgba(239, 68, 68, 0.8)',
            info: 'rgba(59, 130, 246, 0.8)',
        };

        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(99, 102, 241, 0.1)'
                    },
                    ticks: {
                        color: '#e2e8f0'
                    }
                },
                x: {
                    grid: {
                        color: 'rgba(99, 102, 241, 0.1)'
                    },
                    ticks: {
                        color: '#e2e8f0'
                    }
                }
            }
        };

        // Win Rate Chart
        const winRateCtx = document.getElementById('winRateChart').getContext('2d');
        new Chart(winRateCtx, {
            type: 'bar',
            data: {
                labels: {{ chart_labels|safe }},
                datasets: [{
                    label: 'Win Rate (%)',
                    data: {{ chart_win_rates|safe }},
                    backgroundColor: chartColors.success,
                    borderColor: 'rgba(16, 185, 129, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                ...chartOptions,
                scales: {
                    ...chartOptions.scales,
                    y: {
                        ...chartOptions.scales.y,
                        max: 100
                    }
                }
            }
        });

        // Risk-Reward Chart
        const rrCtx = document.getElementById('rrChart').getContext('2d');
        new Chart(rrCtx, {
            type: 'bar',
            data: {
                labels: {{ chart_labels|safe }},
                datasets: [{
                    label: 'Avg RR Ratio',
                    data: {{ chart_rr_ratios|safe }},
                    backgroundColor: chartColors.info,
                    borderColor: 'rgba(59, 130, 246, 1)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });

        // Profit Factor Chart
        const pfCtx = document.getElementById('profitFactorChart').getContext('2d');
        new Chart(pfCtx, {
            type: 'bar',
            data: {
                labels: {{ chart_labels|safe }},
                datasets: [{
                    label: 'Profit Factor',
                    data: {{ chart_profit_factors|safe }},
                    backgroundColor: chartColors.warning,
                    borderColor: 'rgba(245, 158, 11, 1)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });

        // Trades Volume Chart (Pie)
        const tradesCtx = document.getElementById('tradesChart').getContext('2d');
        new Chart(tradesCtx, {
            type: 'doughnut',
            data: {
                labels: {{ chart_labels|safe }},
                datasets: [{
                    label: 'Total Trades',
                    data: {{ chart_total_trades|safe }},
                    backgroundColor: [
                        chartColors.primary,
                        chartColors.success,
                        chartColors.warning,
                        chartColors.danger,
                        chartColors.info,
                        'rgba(139, 92, 246, 0.8)',
                        'rgba(236, 72, 153, 0.8)',
                        'rgba(251, 191, 36, 0.8)',
                        'rgba(34, 197, 94, 0.8)',
                        'rgba(168, 85, 247, 0.8)'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: true,
                        position: 'right',
                        labels: {
                            color: '#e2e8f0'
                        }
                    }
                }
            }
        });

        // Support Badge Polling
        async function updateSupportBadge() {
            try {
                const response = await fetch('{% url "support:unread_count" %}');
                if (response.ok) {
                    const data = await response.json();
                    const badge = document.getElementById('support-badge');
                    if (data.unread_count > 0) {
                        badge.textContent = data.unread_count;
                        badge.style.display = 'inline';
                    } else {
                        badge.style.display = 'none';
                    }
                }
            } catch (error) {
                console.log('Support badge update failed:', error);
            }
        }
        updateSupportBadge();
        setInterval(updateSupportBadge, 30000);
    </script>
</body>
</html>