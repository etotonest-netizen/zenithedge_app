{% extends 'admin_dashboard/base_module.html' %}
{% block title %}Trade Journal - Admin Dashboard{% endblock %}
{% block content %}
<div class="page-header">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <h2><i class="bi bi-journal-text"></i> Trade Journal Management</h2>
            <p class="text-muted mb-0">View all trade journal entries</p>
        </div>
        <a href="{% url 'admin_dashboard:dashboard' %}" class="btn btn-outline-light"><i class="bi bi-arrow-left"></i> Back</a>
    </div>
</div>
<div class="stats-bar">
    <div class="stat-card"><i class="bi bi-journal-text stat-icon text-info"></i><div class="stat-content"><h3>{{ total_count }}</h3><p>Total Entries</p></div></div>
</div>
<div class="data-table-container">
    <table class="table table-dark table-hover mb-0">
        <thead><tr><th>User</th><th>Signal</th><th>Decision</th><th>Outcome</th><th>Pips</th><th>Duration</th><th>Date</th><th>Notes</th></tr></thead>
        <tbody>
            {% for entry in entries %}
            <tr>
                <td>{{ entry.user.email|truncatechars:20 }}</td>
                <td><a href="#" class="badge bg-primary">#{{ entry.signal.id }}</a></td>
                <td>
                    {% if entry.decision == 'take' %}<span class="badge bg-success">Take</span>
                    {% elif entry.decision == 'skip' %}<span class="badge bg-warning">Skip</span>
                    {% else %}<span class="badge bg-secondary">{{ entry.decision }}</span>{% endif %}
                </td>
                <td>
                    {% if entry.outcome == 'win' %}<span class="badge bg-success"><i class="bi bi-arrow-up"></i> Win</span>
                    {% elif entry.outcome == 'loss' %}<span class="badge bg-danger"><i class="bi bi-arrow-down"></i> Loss</span>
                    {% elif entry.outcome == 'breakeven' %}<span class="badge bg-secondary">BE</span>
                    {% else %}<span class="badge bg-info">{{ entry.outcome }}</span>{% endif %}
                </td>
                <td><strong>{{ entry.pips|default:"N/A" }}</strong></td>
                <td><small>{{ entry.duration_minutes|default:"N/A" }} min</small></td>
                <td><small>{{ entry.created_at|date:"M d, H:i" }}</small></td>
                <td><small>{{ entry.notes|default:"N/A"|truncatechars:40 }}</small></td>
            </tr>
            {% empty %}<tr><td colspan="8" class="text-center py-5"><i class="bi bi-inbox" style="font-size: 3rem; opacity: 0.3;"></i><p class="mt-3 text-muted">No journal entries found</p></td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
